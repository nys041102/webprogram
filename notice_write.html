<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>공지 작성</title>
  <link rel="stylesheet" href="css/notice_write.css">
</head>
<body>

<header>
  <div class="header-inner">
    <h1>공지 작성</h1>
  </div>
</header>

<div class="write-header">
  <a href="notice.html" class="back-btn">← 공지 목록으로</a>
</div>

<div class="write-container">

  <label>공지 제목</label>
  <input type="text" id="title">

  <label>공지 내용</label>
  <textarea id="content" rows="6"></textarea>

  <label>이미지 업로드</label>
  <input type="file" id="imageInput" accept="image/*">

  <button id="saveBtn">저장하기</button>
</div>

<script>
document.getElementById("saveBtn").onclick = () => {
  const title = document.getElementById("title").value;
  const content = document.getElementById("content").value;
  const imageInput = document.getElementById("imageInput").files[0];

  if (!title || !content) {
    alert("제목과 내용을 입력하세요.");
    return;
  }

  const reader = new FileReader();
  reader.onload = function(e) {
    const imgURL = imageInput ? e.target.result : null;

    const saved = JSON.parse(localStorage.getItem("noticeData") || "[]");

    saved.push({
      title,
      content,
      image: imgURL,
      date: new Date().toISOString().slice(0,10)
    });

    localStorage.setItem("noticeData", JSON.stringify(saved));

    alert("저장되었습니다!");
    location.href = "notice.html";
  };

  if (imageInput) reader.readAsDataURL(imageInput);
  else reader.onload();
};
</script>

</body>
</html>
