<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>í•™ê³¼ ê³µì§€ ê²Œì‹œíŒ</title>
  <link rel="stylesheet" href="../css/notice.css">
</head>

<body>

<header>
    <h1>êµ°ì‚°ëŒ€í•™êµ ì»´í“¨í„°ì •ë³´ê³µí•™ê³¼</h1>

    <nav>
      <ul>
        <li><a href="index.html">í™ˆ</a></li>
        <li><a class="active" href="notice.html">í•™ê³¼ ê³µì§€</a></li>
        <li><a href="professors.html">êµìˆ˜ì§„</a></li>
        <li><a href="curriculum.html">êµê³¼ê³¼ì •</a></li>
        <li><a href="lab.html">ì—°êµ¬ì‹¤</a></li>
        <li><a href="graduation.html">ì¡¸ì—…ìš”ê±´</a></li>
        <li><a href="careers.html">ì¡¸ì—… í›„ ì§„ë¡œ</a></li>
        <li><a href="contact.html">ì˜¤ì‹œëŠ” ê¸¸</a></li>
        <li><a href="inquiry.html">ë¬¸ì˜</a></li>
      </ul>
    </nav>
</header>

<!-- ì œëª© + ì‘ì„±ë²„íŠ¼ -->
<section class="notice-top">
  <h2>í•™ê³¼ ê³µì§€ ê²Œì‹œíŒ</h2>
  <a href="notice_write.html" class="write-btn">+ ê³µì§€ ì‘ì„±</a>
</section>

<!-- ìºëŸ¬ì…€ ì „ì²´ ë°•ìŠ¤ -->
<div class="carousel-container">

  <button class="carousel-btn left">&#10094;</button>

  <div class="carousel-track">
    <!-- JSê°€ ì±„ì›€ -->
  </div>

  <button class="carousel-btn right">&#10095;</button>
</div>

<footer>
  <p>&copy; 2025 êµ°ì‚°ëŒ€í•™êµ ì»´í“¨í„°ì •ë³´ê³µí•™ê³¼</p>
</footer>

<!-- ğŸ”¥ DBì—ì„œ ê³µì§€ ë¶ˆëŸ¬ì˜¤ê¸° -->
<script>
fetch("http://localhost:3000/notice")
  .then(res => res.json())
  .then(notices => {

    const track = document.querySelector(".carousel-track");
    track.innerHTML = ""; 

    notices.forEach(item => {
      const card = document.createElement("div");
      card.classList.add("notice-card");

      card.innerHTML = `
        <div class="thumb no-image"></div>
        <h3 class="title">${item.title}</h3>
        <p class="desc">${item.content.slice(0, 40)}...</p>
        <span class="date">${item.created_at.split("T")[0]}</span>
      `;

      // í´ë¦­ â†’ íŒì—…
      card.onclick = () => openPopup(item);
      track.appendChild(card);
    });

    new Carousel(".carousel-track", ".carousel-btn.left", ".carousel-btn.right");
  })
  .catch(err => console.error("ê³µì§€ ëª©ë¡ ë¡œë”© ì˜¤ë¥˜:", err));
</script>

<script src="../js/notice_slide.js"></script>

<!-- ğŸ”¥ ê³µì§€ ìƒì„¸ íŒì—… -->
<div class="notice-popup" id="noticePopup">
  <div class="popup-content">
    <button class="close-btn" id="closePopup">Ã—</button>

    <h2 id="popupTitle"></h2>
    <p class="popup-date" id="popupDate"></p>

    <div class="popup-image" id="popupImage"></div>

    <p class="popup-text" id="popupContent"></p>
  </div>
</div>

<!-- íŒì—… JS -->
<script>
function openPopup(item) {
  const popup = document.getElementById("noticePopup");

  document.getElementById("popupTitle").textContent = item.title;
  document.getElementById("popupDate").textContent = item.created_at.split("T")[0];
  document.getElementById("popupContent").textContent = item.content;

  if (item.image_url) {
    document.getElementById("popupImage").innerHTML =
      `<img src="${item.image_url}" style="max-width:100%; border-radius:10px;">`;
  } else {
    document.getElementById("popupImage").innerHTML = "";
  }

  popup.style.display = "flex";
}

document.getElementById("closePopup").onclick = () => {
  document.getElementById("noticePopup").style.display = "none";
};
</script>

</body>
</html>
